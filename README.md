# Disclosure Evaluator

高度な情報公開法評価システム - 日本の情報公開法に基づく段階的評価と LLM 活用による詳細分析

## 概要

このシステムは、日本の情報公開法（行政機関の保有する情報の公開に関する法律）に基づいて、情報の開示可能性を段階的に評価します。各不開示事由について詳細な評価を行い、ユーザーが適切な判断を行えるよう包括的な情報を提供します。

## 主な機能

- **段階的評価**: 各不開示事由について複数の段階で詳細評価
- **LLM 活用**: GPT-5 を使用した高度な法的分析
- **構造化出力**: JSON 形式と人間が読みやすいサマリー形式
- **詳細な理由**: 各評価段階の詳細な理由と法的根拠
- **ユーザー判断支援**: システムが判断を下すのではなく、判断に必要な情報を提供

## 評価対象の不開示事由

1. **個人情報保護** (第 5 条第 1 号)
2. **法人等情報保護** (第 5 条第 2 号)
3. **国家安全保障** (第 5 条第 3 号)
4. **公共の安全と秩序** (第 5 条第 4 号)
5. **内部審議等** (第 5 条第 5 号)
6. **行政運営等** (第 5 条第 6 号)

## 使用方法

### 基本的な使用方法

```bash
# OpenAI APIキーを設定
export OPENAI_API_KEY="your-api-key-here"

# 基本的な評価
python evaluator.py "評価対象の情報"

# コンテキスト付き評価
python evaluator.py "評価対象の情報" "追加のコンテキスト情報"

# 出力テキスト付き評価
python evaluator.py "評価対象の情報" "コンテキスト" "出力テキスト"
```

### 出力形式の選択

```bash
# JSON形式で出力
python evaluator.py "情報の内容" --format json

# 人間が読みやすいサマリー形式で出力（デフォルト）
python evaluator.py "情報の内容" --format summary
```

## 実行例

### 個人情報の評価

```bash
python evaluator.py "私の名前は、山田太郎です。私の住所は、東京都千代田区永田町1-7-1です。私の電話番号は、03-1234-5678です。"
```

### 法人情報の評価

```bash
python evaluator.py "当社の売上高は前年比120%増の50億円を記録しました。主要取引先はA社、B社、C社です。"
```

## 出力例

### サマリー形式の出力

```
# 情報公開法評価結果

## 評価対象
私の名前は、山田太郎です。私の住所は、東京都千代田区永田町1-7-1です。私の電話番号は、03-1234-5678です。

## 評価サマリー
- **評価criteria数**: 6
- **評価完了時刻**: 2025-09-28T20:41:12.377448

## 各不開示事由の評価

### ⚠️ 個人情報保護 (第5条第1号)
- **スコア**: 3/5
- **スコア理由**: 段階1から段階3までの評価では、提供された情報が特定の個人を識別できるものであり、個人のプライバシーや権利利益を害するおそれがあるため、情報公開法第5条第1号に基づく不開示事由に該当すると判断されました。

**段階的評価**:
- 段階1: 個人に関する情報（事業を営む個人の当該事業に関する情報を除く。）か: YES - 提供された情報は、特定の個人である山田太郎氏に関するものであり、氏名、住所、電話番号といった個人を識別できる情報が含まれています。
- 段階2: 特定の個人を識別することができるものか: YES - 提供された情報には、氏名（山田太郎）、住所（東京都千代田区永田町1-7-1）、電話番号（03-1234-5678）が含まれており、これらの情報は特定の個人を識別することが可能です。
...
```

## システム要件

- **Python**: 3.8 以上
- **OpenAI API**: 有効な API キーが必要
- **依存関係**: requirements.txt に記載

## インストール

```bash
# リポジトリのクローン
git clone <repository-url>
cd disclosure-evaluator

# 依存関係のインストール
pip install -r requirements.txt

# OpenAI APIキーの設定
export OPENAI_API_KEY="your-api-key-here"
```

## アーキテクチャ

### 主要コンポーネント

- **StepEvaluator**: 個別評価ステップの実行
- **CriterionEvaluator**: 単一 criteria の評価管理
- **ResultAggregator**: 評価結果の処理
- **DisclosureEvaluator**: メイン評価オーケストレーター

### 設計原則

- **Domain-Driven Design**: ドメイン中心の設計
- **Clean Architecture**: クリーンアーキテクチャの適用
- **Test-Driven Development**: テスト駆動開発
- **Structured Logging**: 構造化ログによる追跡可能性

## 技術仕様

### 評価フロー

1. **入力検証**: 評価対象情報の検証
2. **段階的評価**: 各 criteria について複数段階で評価
3. **LLM 分析**: GPT-5 による詳細な法的分析
4. **結果集約**: 評価結果の構造化
5. **出力生成**: JSON/サマリー形式での出力

### ログ機能

- **構造化ログ**: JSON 形式でのログ出力
- **相関 ID**: リクエスト追跡のための相関 ID
- **エラーハンドリング**: 包括的なエラー処理とフォールバック

## ライセンス

このプロジェクトは MIT ライセンスの下で公開されています。

## 貢献

プルリクエストやイシューの報告を歓迎します。貢献する前に、コーディング規約とテスト要件を確認してください。

## サポート

技術的な質問や問題については、GitHub の Issues ページで報告してください。
